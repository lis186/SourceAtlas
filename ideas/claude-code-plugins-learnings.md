# Claude Code Plugins å­¸ç¿’ç­†è¨˜

## ä¾†æº

- **æ—¥æœŸ**ï¼š2025-12-12
- **åƒè€ƒ**ï¼šhttps://github.com/anthropics/claude-code/tree/main/plugins
- **åˆ†æçš„ Plugins**ï¼šcode-review, feature-dev, plugin-dev, security-guidance

## æ¢ç´¢ç‹€æ…‹ç¸½è¦½

| æ–¹å‘ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| æ¼¸é€²å¼è¼¸å‡º | âœ… å·²å‡ç´š | `/atlas.pattern` å®Œæˆï¼Œå…¶ä»–æ“±ç½® |
| æŒä¹…åŒ– | âœ… å·²å‡ç´š | `--save` + `/atlas.clear` å®Œæˆ |
| ä¿¡å¿ƒ Threshold | â¸ï¸ æ“±ç½® | ç„¡ç”¨æˆ¶éœ€æ±‚ï¼Œé¢¨éšªéæ¿¾æœ‰åƒ¹å€¼å‡è¨­ |
| ä¸¦è¡Œ Agent | â¸ï¸ æ“±ç½® | å¢åŠ è¤‡é›œåº¦ï¼Œtoken æˆæœ¬ä¸æ˜ |
| **è¼¸å‡ºæ ¼å¼çµ±ä¸€** | âœ… å·²å®Œæˆ | v2.9.5 å¯¦ä½œå“ç‰Œè­˜åˆ¥ Header/Footer |

---

## å€¼å¾—æ¢ç´¢çš„æ–¹å‘

### 1. ä¸¦è¡Œ Agent æ¶æ§‹

**ä¾†è‡ª**ï¼šcode-review

**è¨­è¨ˆ**ï¼š
- 4 å€‹ Agent ä¸¦è¡ŒåŸ·è¡Œï¼ˆ2 Compliance + 1 Bug + 1 Historyï¼‰
- æ¯å€‹ Agent æœ‰ç¨ç«‹ focus area
- çµæœåŒ¯ç¸½å¾Œçµ±ä¸€éæ¿¾

**æ½›åœ¨æ‡‰ç”¨**ï¼š
- `/atlas.overview` å¯ä¸¦è¡Œåˆ†æï¼šæŠ€è¡“æ£§ã€æ¶æ§‹ã€æ¸¬è©¦ã€æ–‡æª”
- `/atlas.impact` å¯ä¸¦è¡Œè¿½è¹¤ï¼šimportsã€exportsã€testsã€configs

**å¾…é©—è­‰**ï¼š
- [ ] Claude Code çš„ Task tool ä¸¦è¡Œæ•ˆèƒ½å¦‚ä½•ï¼Ÿ
- [ ] æ˜¯å¦æœƒå¢åŠ  token æ¶ˆè€—ï¼ˆå¤šå€‹ agent å„è‡ªè®€æª”ï¼‰ï¼Ÿ
- [ ] çµæœåˆä½µçš„è¤‡é›œåº¦ï¼Ÿ

**SourceAtlas ç¾æ³**ï¼šå–®ä¸€åŸ·è¡Œï¼Œè¼ƒæ…¢ä½† token å¯æ§

---

### 2. æ¼¸é€²å¼è¼¸å‡ºï¼ˆProgressive Disclosureï¼‰âœ… å·²å‡ç´š

**ç‹€æ…‹**ï¼šå·²å‡ç´šåˆ° [proposals/progressive-disclosure/](../proposals/progressive-disclosure/)

**å¯¦ä½œé€²åº¦**ï¼š
- âœ… `/atlas.pattern` - Smart æ¨¡å¼ + `--brief`/`--full` (v2.9.3)
- âšª å…¶ä»–å‘½ä»¤ - æ“±ç½®ï¼ˆå·²æœ‰å¿«å–æ©Ÿåˆ¶ï¼Œæ•ˆç›Šæœ‰é™ï¼‰

**æ“±ç½®åŸå› **ï¼ˆ2025-12-18ï¼‰ï¼š
1. `/atlas.overview` ç­‰å‘½ä»¤é€šå¸¸åªåŸ·è¡Œä¸€æ¬¡ï¼Œå·²æœ‰ `--save` å¿«å–
2. å¢åŠ ç¶­è­·è¤‡é›œåº¦ï¼ŒROI ä¸é«˜
3. å‡è¨­æœªç¶“é©—è­‰ï¼Œç„¡ä½¿ç”¨è€…æŠ±æ€¨ token æˆæœ¬

**é‡æ–°è©•ä¼°æ¢ä»¶**ï¼šä½¿ç”¨è€…åé¥‹ã€Œè¼¸å‡ºå¤ªå¤šã€æˆ– token æˆæœ¬å•é¡Œ

---

### 3. ä¿¡å¿ƒåˆ†æ•¸ + Threshold æ©Ÿåˆ¶ â¸ï¸ æ“±ç½®

**ç‹€æ…‹**ï¼šæ“±ç½®ï¼ˆ2025-12-19ï¼‰

**åŸå§‹è¨­è¨ˆ**ï¼šè¨­å®šé–€æª»ï¼ˆå¦‚ 0.7ï¼‰ï¼Œåªè¼¸å‡ºé«˜æ–¼é–€æª»çš„å‡è¨­

**æ“±ç½®åŸå› **ï¼š
1. ç„¡ç”¨æˆ¶åé¥‹ã€Œå‡è¨­å¤ªå¤š/é›œè¨Šå¤ªå¤šã€
2. é¢¨éšªï¼šå¯èƒ½éæ¿¾æ‰æœ‰åƒ¹å€¼çš„ä½ä¿¡å¿ƒå‡è¨­
3. å·²æœ‰æ›¿ä»£ï¼š`--brief` åƒæ•¸å¯æ§åˆ¶è¼¸å‡ºé‡

**é‡æ–°è©•ä¼°æ¢ä»¶**ï¼šç”¨æˆ¶æŠ±æ€¨ã€Œè¼¸å‡ºå¤ªé›œã€

**SourceAtlas ç¾æ³**ï¼šæœ‰ 0.0-1.0 ä¿¡å¿ƒåˆ†æ•¸ï¼Œå…¨éƒ¨è¼¸å‡ºç”±ç”¨æˆ¶åˆ¤æ–·

---

### 4. Validation Subagent

**ä¾†è‡ª**ï¼šcode-review

**è¨­è¨ˆ**ï¼š
```
Step 4: 4 agents ä¸¦è¡Œæ‰¾å•é¡Œ
Step 5: å°æ¯å€‹å•é¡Œï¼Œå•Ÿå‹• validation subagent é©—è­‰
Step 6: éæ¿¾æ‰æœªé€šéé©—è­‰çš„å•é¡Œ
```

**æ½›åœ¨æ‡‰ç”¨**ï¼š
- `/atlas.overview` Stage 0 ç”Ÿæˆå‡è¨­å¾Œï¼Œç”¨ subagent é©—è­‰
- å–ä»£ç›®å‰çš„ Stage 1 æ‰‹å‹•é©—è­‰ï¼Ÿ

**å¾…é©—è­‰**ï¼š
- [ ] é©—è­‰ subagent çš„ token æˆæœ¬ï¼Ÿ
- [ ] æ˜¯å¦èƒ½é”åˆ° Stage 1 çš„é©—è­‰å“è³ªï¼Ÿ
- [ ] è‡ªå‹•é©—è­‰ vs äººå·¥é©—è­‰çš„å–æ¨ï¼Ÿ

**SourceAtlas ç¾æ³**ï¼šStage 1 æ˜¯ç¨ç«‹æ­¥é©Ÿï¼Œéœ€è¦äººå·¥è§¸ç™¼

---

### 5. Hook æ©Ÿåˆ¶è½‰ Constitution è¦å‰‡

**ä¾†è‡ª**ï¼šsecurity-guidance

**è¨­è¨ˆ**ï¼š
```
PreToolUse hook â†’ åœ¨å·¥å…·åŸ·è¡Œå‰é©—è­‰
å¯ä»¥é˜»æ“‹ä¸ç¬¦åˆè¦å‰‡çš„æ“ä½œ
```

**æ½›åœ¨æ‡‰ç”¨**ï¼š
```bash
# æŠŠ Constitution Article IIï¼ˆæ’é™¤ç›®éŒ„ï¼‰è½‰ç‚º hook
if [[ "$file_path" == *"node_modules"* ]]; then
  echo "BLOCKED: Constitution Article II violation"
  exit 1
fi
```

**å¾…é©—è­‰**ï¼š
- [ ] SourceAtlas æ˜¯ slash commandï¼Œä¸æ˜¯ pluginï¼Œèƒ½ç”¨ hook å—ï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦æŠŠ SourceAtlas è½‰ç‚º plugin æ¶æ§‹ï¼Ÿ
- [ ] ç›®å‰ `validate-constitution.sh` æ˜¯å¦è¶³å¤ ï¼Ÿ

**SourceAtlas ç¾æ³**ï¼šConstitution æ˜¯æ–‡æª” + äº‹å¾Œé©—è­‰ï¼Œä¸æ˜¯äº‹å‰é˜»æ“‹

---

### 6. æ¨™æº–åŒ–è¼¸å‡ºæ ¼å¼ ğŸ” æ·±åº¦æ¢ç´¢ä¸­

**ä¾†è‡ª**ï¼šcode-review

**è¨­è¨ˆ**ï¼š
```markdown
## Code review

Found 3 issues:

1. [description] (CLAUDE.md says: "[exact quote]")
   https://github.com/.../file.ts#L67-L72
```

---

#### ğŸ” æ·±åº¦åˆ†æï¼ˆ2025-12-19ï¼‰

##### ç¾æ³ç›¤é»

| å‘½ä»¤ | è¼¸å‡ºæ ¼å¼ | Header | Footer | è­‰æ“šæ ¼å¼ | Handoffs |
|------|---------|--------|--------|---------|----------|
| `/atlas.overview` | YAML | âŒ ç„¡ | âŒ ç„¡ | `file:line` | âœ… æœ‰ |
| `/atlas.pattern` | Markdown | `# Pattern: [Name]` | `---` | `[File Path]:[line]` | âœ… æœ‰ |
| `/atlas.history` | Markdown | `=== Smart Temporal Analysis ===` | `---` | `commit hash, file:line` | âœ… æœ‰ |
| `/atlas.impact` | Markdown | `=== API/Model Impact Analysis ===` | `---` | `[path:line]` | âœ… æœ‰ |
| `/atlas.flow` | Markdown | ç„¡æ¨™æº– | âœ… Analysis Metadata | `ğŸ“ file:line` | âœ… æœ‰ |
| `/atlas.deps` | YAML | âŒ ç„¡ | `## Next Steps` | `[path:line]` | âœ… æœ‰ |

##### ç™¼ç¾çš„ä¸ä¸€è‡´

1. **Header æ ¼å¼ä¸çµ±ä¸€**
   - `=== Title ===`ï¼ˆhistory, impactï¼‰
   - `# Pattern: Name`ï¼ˆpatternï¼‰
   - ç„¡ Headerï¼ˆoverview, depsï¼‰

2. **Evidence æ ¼å¼ä¸çµ±ä¸€**
   - `file:line`
   - `[path:line]`
   - `ğŸ“ file:line`
   - `[File Path]:[line]`

3. **Handoffs æ ¼å¼å·²çµ±ä¸€** âœ…
   - å…¨éƒ¨ä½¿ç”¨ `## Recommended Next` + è¡¨æ ¼

4. **æ··åˆ YAML/Markdown**
   - overview, deps â†’ YAML
   - pattern, history, impact, flow â†’ Markdown

##### ä¸‰ç¨®çµ±ä¸€æ–¹æ¡ˆ

| æ–¹æ¡ˆ | æè¿° | å„ªé» | ç¼ºé» |
|------|------|------|------|
| **A. è¼•é‡çµ±ä¸€** | åªçµ±ä¸€ Header/Footer/Evidence | æ”¹å‹•å° | ä»æœ‰å·®ç•° |
| **B. æ ¼å¼çµ±ä¸€** | å…¨éƒ¨æ”¹ç‚º Markdown | ä¸€è‡´æ€§é«˜ | overview/deps ç ´å£æ€§è®Šæ›´ |
| **C. Schema å®šç¾©** | å®šç¾©æ¨™æº– + é©—è­‰è…³æœ¬ | å¯æ“´å±• | å¢åŠ è¤‡é›œåº¦ |

**å»ºè­°**ï¼š**æ–¹æ¡ˆ Aï¼ˆè¼•é‡çµ±ä¸€ï¼‰** - æŠ•å…¥ç”¢å‡ºæ¯”æœ€é«˜

##### æ–¹æ¡ˆ A å…·é«”è¨­è¨ˆï¼ˆä¿®è¨‚ç‰ˆ 2025-12-19ï¼‰

ç¶“ä½¿ç”¨è€…è¨ªè«‡æ¨¡æ“¬å¾Œçš„æœ€çµ‚è¨­è¨ˆï¼š

**1. çµ±ä¸€ Header**
```markdown
ğŸ—ºï¸ SourceAtlas: [Command Name]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[emoji] [target] â”‚ [key metric]
```

**2. å‘½ä»¤å°ˆå±¬ Emoji**
| å‘½ä»¤ | Emoji | ç¯„ä¾‹ Header |
|------|-------|-------------|
| overview | ğŸ”­ | `ğŸ”­ my-app â”‚ MEDIUM (2.5K files)` |
| pattern | ğŸ§© | `ğŸ§© repository â”‚ 15 files` |
| history | ğŸ“œ | `ğŸ“œ src/ â”‚ 12 months` |
| impact | ğŸ’¥ | `ğŸ’¥ User model â”‚ 23 dependents` |
| flow | ğŸ”€ | `ğŸ”€ checkout â”‚ 5 steps` |
| deps | ğŸ“¦ | `ğŸ“¦ iOS 16â†’17 â”‚ 35 APIs` |

**3. çµ±ä¸€ Footer**
```markdown
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ—ºï¸ v2.9.4 â”‚ Constitution v1.1
```

**4. Evidence æ ¼å¼**
```
file:line          # æ¨™æº–æ ¼å¼ï¼ˆä¿æŒä¸è®Šï¼‰
```

**è¨­è¨ˆæ±ºç­–**ï¼š
- åˆ†éš”ç·š 30 å­—å…ƒï¼ˆé¿å…çª„ terminal æ›è¡Œï¼‰
- ç”¨ `â”‚` åˆ†éš”è³‡è¨Šï¼ˆæ¯” `|` æ›´ç¾è§€ï¼‰
- Footer ç°¡æ½”ï¼ˆç‰ˆæœ¬ + Constitutionï¼‰
- ä¸åŠ  timestampï¼ˆæŒ‰éœ€å†åŠ ï¼‰

##### å¯¦ä½œæˆæœ¬è©•ä¼°

| å‘½ä»¤ | æ”¹å‹• | å·¥ä½œé‡ |
|------|------|--------|
| `/atlas.overview` | åŠ  Header | 15min |
| `/atlas.pattern` | æ”¹ Header æ ¼å¼ | 10min |
| `/atlas.history` | æ”¹ Header æ ¼å¼ | 10min |
| `/atlas.impact` | æ”¹ Header æ ¼å¼ | 10min |
| `/atlas.flow` | åŠ çµ±ä¸€ Header | 15min |
| `/atlas.deps` | åŠ  Header | 15min |

**ç¸½å·¥ä½œé‡**ï¼šç´„ 1-1.5 å°æ™‚

##### é¢¨éšªè©•ä¼°

| é¢¨éšª | æ©Ÿç‡ | å½±éŸ¿ | ç·©è§£ |
|------|------|------|------|
| ç”¨æˆ¶ç¿’æ…£æ”¹è®Š | ä½ | ä½ | Header è®ŠåŒ–ä¸å¤§ |
| ç ´å£ç¾æœ‰å¿«å– | ç„¡ | ç„¡ | åªæ”¹è¼¸å‡ºæ ¼å¼ |
| prompt æª”æ¡ˆéå¤§ | ä½ | ä½ | å¢åŠ  <50 è¡Œ |

##### çµè«–

**å¯è¡Œæ€§**ï¼šâœ… é«˜
**åƒ¹å€¼**ï¼š
- è¦–è¦ºä¸€è‡´æ€§æå‡
- å“ç‰Œè­˜åˆ¥åº¦ï¼ˆSourceAtlas æ¨™æº–æ ¼å¼ï¼‰
- æ–¹ä¾¿å¾ŒçºŒå·¥å…·æ•´åˆï¼ˆè§£æå™¨ï¼‰

**å»ºè­°**ï¼šå¯å‡ç´šåˆ° `proposals/`ï¼Œä½†å„ªå…ˆç´šä¸­ç­‰

**SourceAtlas ç¾æ³**ï¼šå„å‘½ä»¤è¼¸å‡ºæ ¼å¼æœ‰å·®ç•°ï¼Œä½† Handoffs å·²çµ±ä¸€

---

## SourceAtlas å·²ç¶“åšå¾—æ›´å¥½çš„åœ°æ–¹

é€™äº›æ˜¯ SourceAtlas çš„å„ªå‹¢ï¼Œä¸éœ€è¦æ”¹ï¼š

1. **Constitution æ²»ç†** - Claude Code Plugins æ²’æœ‰çµ±ä¸€è¦å‰‡æ¡†æ¶
2. **è¦æ¨¡æ„ŸçŸ¥** - Plugins æ˜¯ä¸€åˆ€åˆ‡ï¼ŒSourceAtlas æœ‰ 5 ç´šç­–ç•¥
3. **è³‡è¨Šç†è«–** - é«˜ç†µå„ªå…ˆã€æƒææ¯”ä¾‹ä¸Šé™
4. **141 Patterns** - é å®šç¾© patternï¼Œä¸ä¾è³´å³æ™‚åˆ¤æ–·
5. **Handoffs åŸå‰‡** - å‹•æ…‹ä¸‹ä¸€æ­¥ï¼Œä¸æ˜¯å›ºå®šæµç¨‹

---

## å„ªå…ˆç´šè©•ä¼°

| æ–¹å‘ | åƒ¹å€¼ | é›£åº¦ | å»ºè­°å„ªå…ˆç´š |
|------|------|------|------------|
| æ¼¸é€²å¼è¼¸å‡º | é«˜ï¼ˆtoken æ•ˆç‡ï¼‰ | ä¸­ | â­â­â­â­ |
| ä¿¡å¿ƒ Threshold | ä¸­ï¼ˆæ¸›å°‘é›œè¨Šï¼‰ | ä½ | â­â­â­ |
| ä¸¦è¡Œ Agent | ä¸­ï¼ˆé€Ÿåº¦ï¼‰ | é«˜ | â­â­ |
| Validation Subagent | ä½ï¼ˆå·²æœ‰ Stage 1ï¼‰ | é«˜ | â­ |
| Hook æ©Ÿåˆ¶ | ä½ï¼ˆå·²æœ‰é©—è­‰è…³æœ¬ï¼‰ | é«˜ | â­ |
| è¼¸å‡ºæ ¼å¼çµ±ä¸€ | ä¸­ï¼ˆä¸€è‡´æ€§ï¼‰ | ä¸­ | â­â­â­ |

---

## ä¸‹ä¸€æ­¥

- [x] ~~è©•ä¼°æ¼¸é€²å¼è¼¸å‡ºçš„å…·é«”è¨­è¨ˆ~~ â†’ å·²å‡ç´šä¸¦éƒ¨åˆ†å®Œæˆ
- [x] ~~æ¸¬è©¦ä¿¡å¿ƒåˆ†æ•¸ threshold~~ â†’ æ“±ç½®ï¼ˆç„¡ç”¨æˆ¶éœ€æ±‚ï¼‰
- [x] **å¯©è¦–å„å‘½ä»¤è¼¸å‡ºæ ¼å¼ï¼Œè©•ä¼°çµ±ä¸€æˆæœ¬** â†’ âœ… å·²å¯¦ä½œï¼ˆ2025-12-19ï¼‰
  - ç™¼ç¾ï¼šHeader/Evidence æ ¼å¼ä¸çµ±ä¸€ï¼Œä½† Handoffs å·²çµ±ä¸€
  - å»ºè­°ï¼šæ–¹æ¡ˆ Aï¼ˆè¼•é‡çµ±ä¸€ï¼‰
  - çµæœï¼šç›´æ¥å¯¦ä½œï¼Œä¿®æ”¹ 6 å€‹å‘½ä»¤æª”æ¡ˆï¼Œæ–°å¢å“ç‰Œè­˜åˆ¥ Header/Footer

## å‡ç´šæ¢ä»¶

ç•¶æ»¿è¶³ä»¥ä¸‹æ¢ä»¶æ™‚ï¼Œå¯å°‡å…·é«”é …ç›®ç§»è‡³ `proposals/`ï¼š

1. ç¢ºå®šè¦å¯¦ä½œå“ªå€‹åŠŸèƒ½
2. æœ‰å…·é«”çš„æŠ€è¡“æ–¹æ¡ˆ
3. å®Œæˆåˆæ­¥å¯è¡Œæ€§é©—è­‰
4. å®šç¾©æ¸…æ™°çš„ä½¿ç”¨å ´æ™¯
