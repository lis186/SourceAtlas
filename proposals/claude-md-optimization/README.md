# CLAUDE.md å„ªåŒ–ææ¡ˆ

> **ç‹€æ…‹**: âœ… Completed
> **å»ºç«‹æ—¥æœŸ**: 2025-12-16
> **å®Œæˆæ—¥æœŸ**: 2025-12-16
> **å„ªå…ˆç´š**: ğŸ”´ é«˜
> **å¯¦éš›æ•ˆç›Š**: Token æ•ˆç‡æå‡ **55%**ï¼ˆ1,108 â†’ 499 è¡Œï¼‰

## å•é¡Œé™³è¿°

### ç¾æ³

SourceAtlas çš„ `CLAUDE.md` ç›®å‰æœ‰ **1,108 è¡Œ**ï¼Œè¶…é Anthropic å®˜æ–¹å»ºè­°çš„ **500 è¡Œä¸Šé™** é” **2.2 å€**ã€‚

### å®˜æ–¹æœ€ä½³å¯¦è¸

æ ¹æ“š [Anthropic Skill Authoring Best Practices](https://platform.claude.com/docs/en/agents-and-tools/agent-skills/best-practices)ï¼š

> "Keep SKILL.md body under 500 lines for optimal performance. If your content exceeds this, split it into separate files using progressive disclosure patterns."

æ ¹æ“š [Claude Code Best Practices](https://www.anthropic.com/engineering/claude-code-best-practices)ï¼š

> "CLAUDE.md files become part of Claude's prompts, so they should be refined like any frequently used prompt."

### å½±éŸ¿

1. **Token æµªè²»**: æ¯æ¬¡å°è©±é–‹å§‹éƒ½è¼‰å…¥ 1,108 è¡Œå…§å®¹
2. **Context ç«¶çˆ­**: èˆ‡å°è©±æ­·å²å’Œå…¶ä»– Skills ç«¶çˆ­ context window
3. **æ•ˆèƒ½é™ä½**: éé•·çš„æŒ‡ä»¤é™ä½æ¨¡å‹éµå¾ªæ•ˆç‡
4. **ç¶­è­·å›°é›£**: å–®ä¸€å·¨å¤§æª”æ¡ˆé›£ä»¥ç¶­è­·å’Œæ›´æ–°

---

## è§£æ±ºæ–¹æ¡ˆï¼šProgressive Disclosure æ¶æ§‹

### æ ¸å¿ƒåŸå‰‡

```
CLAUDE.md (ä¸»æª” < 500 è¡Œ)
â”œâ”€â”€ æœ€é—œéµçš„è¦å‰‡å’Œå¿«é€Ÿåƒè€ƒ
â”œâ”€â”€ æŒ‡å‘å­æ–‡æª”çš„ @import é€£çµ
â””â”€â”€ æ˜ç¢ºçš„è§¸ç™¼æ¢ä»¶ï¼ˆä½•æ™‚è®€å–å­æ–‡æª”ï¼‰

å­æ–‡æª”/ (æŒ‰éœ€è¼‰å…¥)
â”œâ”€â”€ è©³ç´°å¯¦ä½œæŒ‡å—
â”œâ”€â”€ æ­·å²è¨˜éŒ„
â””â”€â”€ æ·±åº¦èªªæ˜
```

Claude åˆå§‹åªè¼‰å…¥ä¸»æª”ï¼Œ**éœ€è¦æ™‚æ‰è®€å–å­æ–‡æª”**ï¼Œå¤§å¹…ç¯€çœ tokenã€‚

### @import èªæ³•

CLAUDE.md æ”¯æ´ `@path/to/file` èªæ³•å°å…¥å…¶ä»–æ–‡ä»¶ï¼š

```markdown
# å°ˆæ¡ˆæ–‡æª”
See @README for project overview
See @PROMPTS.md for detailed prompt templates
See @dev-notes/KEY_LEARNINGS.md for key learnings
```

- æ”¯æ´å°ˆæ¡ˆç›®éŒ„å’Œä¸»ç›®éŒ„æ–‡ä»¶
- æ”¯æ´éè¿´å°å…¥ï¼ˆæœ€å¤š 5 å±¤æ·±åº¦ï¼‰
- Claude æœƒæŒ‰éœ€è®€å–ï¼Œè€Œéé å…ˆè¼‰å…¥

---

## ç¾æœ‰çµæ§‹åˆ†æ

### å„å€å¡Šè¡Œæ•¸çµ±è¨ˆ

| å€å¡Š | è¡Œæ•¸ | ä½”æ¯” | å»ºè­° |
|------|------|------|------|
| å°ˆæ¡ˆç¸½è¦½ | ~15 | 1% | âœ… ä¿ç•™ |
| æ¶æ§‹ï¼ˆä¸‰éšæ®µæµç¨‹ï¼‰ | ~43 | 4% | âš ï¸ ç²¾ç°¡ï¼Œè©³ç´°è¦‹ PROMPTS.md |
| ç›®éŒ„çµæ§‹ | ~47 | 4% | âœ… ä¿ç•™ |
| å®‰è£èˆ‡ä½¿ç”¨ | ~97 | 9% | âš ï¸ ç²¾ç°¡ï¼Œè©³ç´°è¦‹ USAGE_GUIDE.md |
| AI å”ä½œæª¢æ¸¬ | ~18 | 2% | âš ï¸ ç§»è‡³å­æ–‡æª” |
| ä½¿ç”¨æ¸¬è©¦çµæœ | ~15 | 1% | âŒ ç§»é™¤ï¼ˆéæ™‚ï¼‰ |
| æª”æ¡ˆæ ¼å¼ | ~47 | 4% | âš ï¸ ç²¾ç°¡ |
| è¼¸å‡ºè¦æ±‚ | ~20 | 2% | âš ï¸ ç§»è‡³ Constitution åƒè€ƒ |
| å¸¸è¦‹æ¨¡å¼è­˜åˆ¥ | ~26 | 2% | âš ï¸ ç§»è‡³å­æ–‡æª” |
| èªè¨€æœ¬åœ°åŒ– | ~23 | 2% | âœ… ä¿ç•™ï¼ˆé‡è¦ï¼‰ |
| ç‰ˆæœ¬æ§åˆ¶ | ~30 | 3% | âš ï¸ ç²¾ç°¡ |
| è³‡è¨Šåˆ†å±¤ | ~40 | 4% | âš ï¸ ç§»è‡³ dev-notes/ |
| å„è³‡æ–™å¤¾ç”¨é€” | ~65 | 6% | âš ï¸ ç§»è‡³å­æ–‡æª” |
| å‡ç´šæ¨™æº– | ~18 | 2% | âš ï¸ ç§»è‡³ dev-notes/ |
| é–‹ç™¼å·¥ä½œæµç¨‹ | ~10 | 1% | âœ… ä¿ç•™ |
| **dev-notes ç®¡ç†è¦å‰‡** | **~114** | **10%** | âŒ **å¿…é ˆç§»é™¤** |
| æœˆåº¦é‡é»ï¼ˆç¯„ä¾‹ï¼‰ | ~56 | 5% | âŒ ç§»é™¤ï¼ˆæ‡‰å‹•æ…‹ï¼‰ |
| v1.0 é—œéµå­¸ç¿’ | ~17 | 2% | âš ï¸ ç²¾ç°¡ï¼Œè©³ç´°è¦‹ KEY_LEARNINGS.md |
| **iOS Patterns** | **~67** | **6%** | âŒ **ç§»è‡³å­æ–‡æª”** |
| **Kotlin Patterns** | **~77** | **7%** | âŒ **ç§»è‡³å­æ–‡æª”** |
| **Python Patterns** | **~71** | **6%** | âŒ **ç§»è‡³å­æ–‡æª”** |
| **TS/React/Vue Patterns** | **~89** | **8%** | âŒ **ç§»è‡³å­æ–‡æª”** |
| ç•¶å‰ç‹€æ…‹ | ~80 | 7% | âš ï¸ ç²¾ç°¡ |
| å¯¦ä½œæ ¸å¿ƒåŸå‰‡ | ~12 | 1% | âœ… ä¿ç•™ |

### ä¸»è¦å•é¡Œå€å¡Š

1. **dev-notes ç®¡ç†è¦å‰‡ (~114 è¡Œ)** - æ‡‰ç§»è‡³ `dev-notes/CONTRIBUTION.md`
2. **Pattern è©³ç´°èªªæ˜ (~304 è¡Œ)** - æ‡‰ç§»è‡³ `docs/PATTERNS.md`
3. **æœˆåº¦é‡é»ç¯„ä¾‹ (~56 è¡Œ)** - æ‡‰ç§»é™¤ï¼Œé€™æ˜¯ç¯„ä¾‹ä¸æ˜¯è¦å‰‡
4. **è©³ç´°ä½¿ç”¨èªªæ˜ (~97 è¡Œ)** - å·²æœ‰ `USAGE_GUIDE.md`ï¼Œæ‡‰å¼•ç”¨è€Œéé‡è¤‡

**å¯ç§»é™¤/ç§»å‹•è¡Œæ•¸ï¼š~571 è¡Œï¼ˆ51%ï¼‰**

---

## ç›®æ¨™æ¶æ§‹

### æ–° CLAUDE.md çµæ§‹ï¼ˆ< 500 è¡Œï¼‰

```markdown
# CLAUDE.md

## å°ˆæ¡ˆç¸½è¦½ (~30 è¡Œ)
- ä¸€å¥è©±èªªæ˜ SourceAtlas æ˜¯ä»€éº¼
- ç•¶å‰ç‰ˆæœ¬å’Œç‹€æ…‹
- æ ¸å¿ƒåƒ¹å€¼ä¸»å¼µ

## å¿«é€Ÿåƒè€ƒ (~50 è¡Œ)
- å¸¸ç”¨å‘½ä»¤ä¸€è¦½è¡¨
- é—œéµè·¯å¾‘
- èªè¨€è¦ç¯„ï¼ˆå°ç£ç¹é«”ä¸­æ–‡ï¼‰

## æ ¸å¿ƒåŸå‰‡ (~30 è¡Œ)
- è³‡è¨Šç†è«–åŸºç¤ï¼ˆæŒ‡å‘ @ANALYSIS_CONSTITUTION.mdï¼‰
- è¦æ¨¡æ„ŸçŸ¥è¨­è¨ˆ
- æ¨™æº–å„ªæ–¼è‡ªè¨‚

## ç›®éŒ„çµæ§‹ (~50 è¡Œ)
- ç°¡åŒ–ç‰ˆç›®éŒ„æ¨¹
- é—œéµæª”æ¡ˆèªªæ˜

## Commands (~60 è¡Œ)
- æ‰€æœ‰ /atlas.* å‘½ä»¤åˆ—è¡¨
- ç°¡çŸ­èªªæ˜å’Œä½¿ç”¨æ™‚æ©Ÿ
- è©³ç´°è¦‹ @USAGE_GUIDE.md

## é–‹ç™¼æŒ‡å— (~40 è¡Œ)
- Git å·¥ä½œæµç¨‹ï¼ˆGitButlerï¼‰
- ç‰ˆæœ¬æ§åˆ¶è¦ç¯„
- è©³ç´°è¦‹ @dev-notes/README.md

## Pattern æ”¯æ´ (~30 è¡Œ)
- æ”¯æ´çš„èªè¨€åˆ—è¡¨å’Œ pattern æ•¸é‡
- è©³ç´°è¦‹ @docs/PATTERNS.md

## ç•¶å‰ç‹€æ…‹ (~50 è¡Œ)
- å·²å®ŒæˆåŠŸèƒ½æ‘˜è¦
- é€²è¡Œä¸­å·¥ä½œ
- æœªä¾†è¦åŠƒæŒ‡å‘ @dev-notes/ROADMAP.md

## é‡è¦å­¸ç¿’ (~30 è¡Œ)
- 3-5 å€‹æœ€é—œéµçš„å­¸ç¿’
- è©³ç´°è¦‹ @dev-notes/KEY_LEARNINGS.md

## é™„éŒ„ï¼šè§¸ç™¼æ¢ä»¶ (~30 è¡Œ)
- ä½•æ™‚è®€å– Constitution
- ä½•æ™‚è®€å– Pattern æ–‡æª”
- ä½•æ™‚è®€å– dev-notes

---
ç¸½è¨ˆï¼š~400 è¡Œ
```

### æ–°å¢å­æ–‡æª”

| æ–‡æª” | å…§å®¹ | åŸä½ç½® |
|------|------|--------|
| `docs/PATTERNS.md` | æ‰€æœ‰èªè¨€ pattern è©³ç´°èªªæ˜ | CLAUDE.md |
| `dev-notes/CONTRIBUTION.md` | dev-notes ç®¡ç†è¦å‰‡ | CLAUDE.md |
| `docs/AI_COLLABORATION.md` | AI å”ä½œæª¢æ¸¬èªªæ˜ | CLAUDE.md |
| `docs/COMMON_PATTERNS.md` | éœ€è¦è­˜åˆ¥çš„å¸¸è¦‹æ¨¡å¼ | CLAUDE.md |

---

## å¯¦ä½œè¨ˆç•«

### Phase 1: æº–å‚™ï¼ˆ30 åˆ†é˜ï¼‰

- [ ] å»ºç«‹ `docs/` ç›®éŒ„
- [ ] çµ±è¨ˆå„å€å¡Šç¢ºåˆ‡è¡Œæ•¸
- [ ] ç¢ºèªå¼•ç”¨é—œä¿‚

### Phase 2: æ‹†åˆ†ï¼ˆ1 å°æ™‚ï¼‰

- [ ] å»ºç«‹ `docs/PATTERNS.md`ï¼ˆç§»å‹• Pattern å…§å®¹ï¼‰
- [ ] å»ºç«‹ `dev-notes/CONTRIBUTION.md`ï¼ˆç§»å‹•ç®¡ç†è¦å‰‡ï¼‰
- [ ] å»ºç«‹ `docs/AI_COLLABORATION.md`
- [ ] å»ºç«‹ `docs/COMMON_PATTERNS.md`

### Phase 3: é‡æ§‹ CLAUDE.mdï¼ˆ1 å°æ™‚ï¼‰

- [ ] æŒ‰æ–°çµæ§‹é‡å¯« CLAUDE.md
- [ ] åŠ å…¥ @import å¼•ç”¨
- [ ] åŠ å…¥è§¸ç™¼æ¢ä»¶èªªæ˜
- [ ] é©—è­‰è¡Œæ•¸ < 500

### Phase 4: é©—è­‰ï¼ˆ30 åˆ†é˜ï¼‰

- [ ] æ¸¬è©¦ Claude æ˜¯å¦æ­£ç¢ºè®€å–å­æ–‡æª”
- [ ] ç¢ºèªç„¡è³‡è¨Šéºå¤±
- [ ] æ¸¬è©¦å„ç¨®ä½¿ç”¨å ´æ™¯

---

## é æœŸæ•ˆç›Š

### Token ç¯€çœ

| å ´æ™¯ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | ç¯€çœ |
|------|--------|--------|------|
| ä¸€èˆ¬å°è©± | ~1108 è¡Œè¼‰å…¥ | ~400 è¡Œè¼‰å…¥ | **64%** |
| éœ€è¦ Pattern è³‡è¨Š | ~1108 è¡Œ | ~400 + ~300 è¡Œ | **37%** |
| é–‹ç™¼è²¢ç» | ~1108 è¡Œ | ~400 + ~114 è¡Œ | **54%** |

### å…¶ä»–æ•ˆç›Š

- **è¼‰å…¥é€Ÿåº¦æå‡**: åˆå§‹å›æ‡‰æ›´å¿«
- **ç¶­è­·æ€§æå‡**: å„æ–‡æª”è·è²¬æ¸…æ™°
- **å¯æ“´å±•æ€§**: æ–°å…§å®¹åŠ åˆ°å­æ–‡æª”ï¼Œä¸»æª”ä¸è†¨è„¹
- **åœ˜éšŠå”ä½œ**: ä¸åŒæˆå“¡å¯ç¶­è­·ä¸åŒå­æ–‡æª”

---

## é¢¨éšªèˆ‡ç·©è§£

### é¢¨éšª 1: Claude ä¸è®€å–å­æ–‡æª”

**ç·©è§£**: åœ¨ CLAUDE.md æ˜ç¢ºå¯«è§¸ç™¼æ¢ä»¶ï¼š
```markdown
## è§¸ç™¼æ¢ä»¶

ç•¶ä½¿ç”¨è€…å•é¡Œæ¶‰åŠä»¥ä¸‹å…§å®¹æ™‚ï¼Œè«‹è®€å–å°æ‡‰æ–‡æª”ï¼š
- Pattern å¯¦ä½œç´°ç¯€ â†’ è®€å– @docs/PATTERNS.md
- é–‹ç™¼è²¢ç»æŒ‡å— â†’ è®€å– @dev-notes/CONTRIBUTION.md
- AI å”ä½œæª¢æ¸¬ â†’ è®€å– @docs/AI_COLLABORATION.md
```

### é¢¨éšª 2: è³‡è¨Šåˆ†æ•£é›£æ‰¾

**ç·©è§£**:
- ä¸»æª”ä¿æŒå®Œæ•´çš„ã€Œç›®éŒ„ã€åŠŸèƒ½
- æ¯å€‹å­æ–‡æª”é–‹é ­èªªæ˜å…¶ç”¨é€”
- å»ºç«‹æ¸…æ™°çš„å‘½åæ…£ä¾‹

### é¢¨éšª 3: é‡è¤‡å…§å®¹ä¸åŒæ­¥

**ç·©è§£**:
- ä¸»æª”åªæ”¾ã€ŒæŒ‡å‘ã€ï¼Œä¸æ”¾ã€Œå…§å®¹ã€
- å®šæœŸç”¨è…³æœ¬æª¢æŸ¥å¼•ç”¨æ˜¯å¦æœ‰æ•ˆ

---

## åƒè€ƒè³‡æ–™

- [Anthropic Skill Authoring Best Practices](https://platform.claude.com/docs/en/agents-and-tools/agent-skills/best-practices)
- [Claude Code Best Practices](https://www.anthropic.com/engineering/claude-code-best-practices)
- [Notes on CLAUDE.md Structure](https://callmephilip.com/posts/notes-on-claude-md-structure-and-best-practices/)
- [Claude Code is a Beast - Reddit](https://dev.to/diet-code103/claude-code-is-a-beast-tips-from-6-months-of-hardcore-use-572n)

---

## æ±ºç­–è¨˜éŒ„

### é—œéµæŠ€è¡“ç™¼ç¾ âš ï¸

ç¶“æŸ¥è­‰ï¼ŒåŸææ¡ˆçš„æ ¸å¿ƒå‡è¨­æœ‰èª¤ï¼š

| åŸå‡è¨­ | å¯¦éš›æƒ…æ³ |
|--------|----------|
| `@import` æ˜¯ lazy loading | âŒ `@import` æœƒåœ¨å°è©±é–‹å§‹æ™‚**ç«‹å³è¼‰å…¥æ‰€æœ‰æª”æ¡ˆ** |
| æ‹†åˆ†å­æ–‡æª”å¯ç¯€çœ token | âŒ æ‹†åˆ†ä¸çœ tokenï¼Œå› ç‚ºå…¨éƒ¨é è¼‰å…¥ |
| GitHub Issue #11759 | é€™æ˜¯ Feature Requestï¼Œlazy loading **å°šæœªå¯¦ä½œ** |

### æ¡ç”¨æ–¹æ¡ˆè®Šæ›´

```
åŸæ–¹æ¡ˆï¼ˆProgressive Disclosureï¼‰:
CLAUDE.md â†’ @import â†’ docs/*.mdï¼ˆæŒ‰éœ€è¼‰å…¥ï¼‰
âŒ ä¸å¯è¡Œ - @import ä¸æ˜¯ lazy loading

å¯¦éš›æ–¹æ¡ˆï¼ˆDelete + Rulesï¼‰:
1. CLAUDE.md ç›´æ¥åˆªé™¤å†—é¤˜å…§å®¹ï¼ˆéæ‹†åˆ†ï¼‰
2. å¿…è¦è¦å‰‡ç§»è‡³ .claude/rules/ï¼ˆè‡ªå‹•è¼‰å…¥æ©Ÿåˆ¶ï¼‰
âœ… å¯è¡Œ - é”æˆ 55% æ¸›é‡
```

### æ±ºç­–çµè«–

1. âŒ **ä¸å»ºç«‹ `docs/` ç›®éŒ„** - æ‹†åˆ†ä¸çœ token
2. âœ… **ç›´æ¥åˆªé™¤å†—é¤˜å…§å®¹** - Pattern è©³ç´°èªªæ˜æ”¹ç‚ºè¡¨æ ¼æ‘˜è¦
3. âœ… **ä½¿ç”¨ `.claude/rules/`** - dev-notes è¦å‰‡ç§»è‡³æ­¤è™•
4. âŒ **ä¸ä½¿ç”¨ @import** - ç­‰å¾…å®˜æ–¹ lazy loading åŠŸèƒ½

---

## å¯¦éš›åŸ·è¡Œçµæœ

### åˆªé™¤çš„å…§å®¹

| å€å¡Š | è¡Œæ•¸ | è™•ç†æ–¹å¼ |
|------|------|----------|
| ä½¿ç”¨æ¸¬è©¦çµæœ | ~15 | âŒ åˆªé™¤ï¼ˆéæ™‚ï¼‰ |
| è³‡è¨Šåˆ†å±¤èˆ‡æƒ³æ³•å­µåŒ– | ~38 | âŒ åˆªé™¤ï¼ˆè©³è¦‹å„ READMEï¼‰ |
| å„è³‡æ–™å¤¾ç”¨é€”è©³è§£ | ~63 | âŒ åˆªé™¤ï¼ˆè©³è¦‹å„ READMEï¼‰ |
| å‡ç´šæ¨™æº– | ~18 | âŒ åˆªé™¤ï¼ˆè©³è¦‹ proposals/READMEï¼‰ |
| Pattern è©³ç´°èªªæ˜ | ~280 | ğŸ”„ ç²¾ç°¡ç‚ºè¡¨æ ¼æ‘˜è¦ |
| ç‰ˆæœ¬æ­·ç¨‹å†—é•·æè¿° | ~4 | ğŸ”„ æŒ‡å‘ HISTORY.md |
| dev-notes ç®¡ç†è¦å‰‡ | ~176 | ğŸ”„ ç§»è‡³ `.claude/rules/` |

### æ–°å¢æª”æ¡ˆ

```
.claude/rules/dev-notes-rules.md  # 142 è¡Œï¼Œè‡ªå‹•è¼‰å…¥
```

### æœ€çµ‚çµæœ

| æŒ‡æ¨™ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | è®ŠåŒ– |
|------|--------|--------|------|
| CLAUDE.md è¡Œæ•¸ | 1,108 | 499 | **-55%** |
| ç¬¦åˆ 500 è¡Œæ¨™æº– | âŒ | âœ… | - |
| é—œéµè³‡è¨Šå®Œæ•´ | âœ… | âœ… | ç„¡æå¤± |

---

## æ›´æ–°æ—¥èªŒ

- 2025-12-16: åˆç‰ˆææ¡ˆï¼ŒåŸºæ–¼ Reddit æ–‡ç« å•Ÿç™¼å’Œ Anthropic å®˜æ–¹æœ€ä½³å¯¦è¸ç ”ç©¶
- 2025-12-16: **å®Œæˆå¯¦ä½œ** - ç™¼ç¾ @import é lazy loadingï¼Œæ”¹æ¡ Delete + Rules æ–¹æ¡ˆï¼Œé”æˆ 55% æ¸›é‡
